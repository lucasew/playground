\documentclass[tikz]{standalone}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{color,xcolor}
\usepackage{xfp}
\usetikzlibrary{positioning,math,calc}
\pgfplotsset{compat=1.18}

% ========== PARÂMETROS CONFIGURÁVEIS ==========
\def\maxIters{50}

% Use #1 como marcador para a variável
\def\funcaoExpr#1{sin(deg(#1))}
\def\funcaoNome{$\sin(x)$}
\def\limiteA{0}                          
\def\limiteB{pi}                         
\def\integralExata{2}                    
% ==============================================

\begin{document}
	
	\pagecolor{black}
	\color{white}
	
	\foreach \n in {2,3,...,\maxIters}{
		
		\tikzmath{
			int \n;
			int \i;
			real \soma;
			\a = \limiteA;
			\b = \limiteB;
			\h = (\b-\a)/\n;
			function F(\x) {
				return \funcaoExpr{\x};
			};
			\soma = 0;
			for \i in {0,1,...,\fpeval{\n-1}} {
				\soma = \soma + \h*F(\a + (\i + 1)*\h); 			
			};
			\exato = \integralExata;
			\erro = 100*abs(\exato - \soma)/\exato;
		}
		
		\begin{tikzpicture}[
			declare function = {f(\x) = \funcaoExpr{\x};},
			scale=1.5, 
			font=\small
			]
			\clip (-1,-1) rectangle (5,2.2);
			\draw[-latex] (-0.5,0) -- (4,0) node[right] {$x$};
			\draw[-latex] (0,-0.5) -- (0,1.5) node[above] {$y$};
			\foreach \i/\texto in {0.7853/\frac{\pi}{4},1.5707/\frac{\pi}{2},2.3561/\frac{3\pi}{4},3.1516/\pi}{
				\draw (\i,2pt) -- (\i,-2pt) node[below] {$\texto$};
			}
			\foreach \i in {0.25,0.5,0.75,1}{
				\draw (2pt,\i) -- (-2pt,\i) node[left] {\i};
			}
			
			\draw[cyan,thick,domain=\a:\b,smooth,samples=100] plot (\x, {f(\x)});
			
			\foreach \i in {0,1,...,\fpeval{\n-1}}{
				\draw[magenta,opacity=0.3,fill=magenta] ({\a + \i*\h},{0}) rectangle ({\a + (\i+1)*\h},{f(\a + (\i+1)*\h)});
			}
			
			\node[anchor=west] at (3,1.75) {\funcaoNome};
			\node[anchor=west] at (3,1.5) {$A_{\n} = \fpeval{round(\soma,5)}$};
			\node[anchor=west] at (3,1.25) {$E_{\n} = \fpeval{round(\erro,5)}\%$};
		\end{tikzpicture}
	}
	
\end{document}